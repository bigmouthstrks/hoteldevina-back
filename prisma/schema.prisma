generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Worker {
  workerId       Int           @id @default(autoincrement())
  rut            Int
  name           String
  lastName       String
  email          String
  positionId     Int
  contractTypeId Int
  reservations   Reservation[]
}

model RoomType {
  roomTypeId     Int           @id @default(autoincrement())
  name           String
  description    String?
  singleBedCount Int
  queenBedCount  Int
  features       String[]
  price          Int
  promotionPrice Int
  capacity       Int
  rooms          Room[]
  reservations   Reservation[]
}

model Room {
  roomId      Int      @id @default(autoincrement())
  number      Int
  isAvailable Boolean
  roomTypeId  Int
  roomType    RoomType @relation(fields: [roomTypeId], references: [roomTypeId])
}

model Passenger {
  passengerId    Int           @id @default(autoincrement())
  documentType   String?
  documentNumber String?
  firstName      String
  lastName       String
  email          String?
  reservations   Reservation[]
}

model Reservation {
  reservationId       Int               @id @default(autoincrement())
  checkIn             DateTime
  checkOut            DateTime
  passengers          Passenger[]
  roomTypeId          Int
  roomType            RoomType          @relation(fields: [roomTypeId], references: [roomTypeId])
  userId              Int
  user                User              @relation(fields: [userId], references: [userId])
  workerId            Int
  worker              Worker            @relation(fields: [workerId], references: [workerId])
  reservationStatusId Int
  reservationStatus   ReservationStatus @relation(fields: [reservationId], references: [reservationStatusId])
}

model User {
  userId         Int           @id @default(autoincrement())
  email          String        @unique
  password       String
  role           String
  documentType   String?
  documentNumber String?
  reservations   Reservation[]
}

model ReservationStatus {
  reservationStatusId Int           @id @default(autoincrement())
  name                String
  description         String?
  reservations        Reservation[]
}
